<div class="mis-turnos-container">
    <!-- Header -->
    <div class="header">
        <h1 class="title">Mis Turnos</h1>
        <p class="subtitle">Gestiona y visualiza todos tus turnos médicos</p>
    </div>

    <!-- Loading State -->
    <div *ngIf="loading()" class="loading-container">
        <div class="spinner"></div>
        <p class="loading-text">Cargando turnos...</p>
    </div>

    <!-- Content -->
    <div *ngIf="!loading()" class="content">
        <!-- Próximos Turnos Section -->
        <section class="section">
            <div class="section-header">
                <h2 class="section-title">
                    <svg class="section-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z">
                        </path>
                    </svg>
                    Próximos Turnos
                </h2>
                <span class="badge-count">{{ turnosActivos().length }}</span>
            </div>

            <!-- Active Appointments -->
            <div *ngIf="turnosActivos().length > 0" class="turnos-grid">
                <div *ngFor="let turno of turnosActivos()" class="turno-card active">
                    <div class="card-header">
                        <div class="patient-info">
                            <div class="patient-avatar">
                                {{ turno.pacienteNombre?.charAt(0) || 'P' }}
                            </div>
                            <div>
                                <h3 class="patient-name">{{ turno.pacienteNombre || 'Paciente' }}</h3>
                                <p class="patient-age" *ngIf="turno.pacienteEdad">{{ turno.pacienteEdad }} años</p>
                            </div>
                        </div>
                        <span [class]="'status-badge ' + getStatusColor(turno.estado)">
                            {{ turno.estado }}
                        </span>
                    </div>

                    <div class="card-body">
                        <div class="info-row">
                            <svg class="info-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                            </svg>
                            <span class="info-label">Profesional:</span>
                            <span class="info-value">{{ turno.profesionalNombre || 'No asignado' }}</span>
                        </div>

                        <div class="info-row">
                            <svg class="info-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z">
                                </path>
                            </svg>
                            <span class="info-label">Fecha:</span>
                            <span class="info-value">{{ turno.fechaString || formatDate(turno.fecha) }}</span>
                        </div>

                        <div class="info-row">
                            <svg class="info-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                            <span class="info-label">Hora:</span>
                            <span class="info-value">{{ turno.horaString || turno.hora }}</span>
                        </div>

                        <div class="info-row">
                            <svg class="info-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z">
                                </path>
                            </svg>
                            <span class="info-label">Motivo:</span>
                            <span class="info-value">{{ turno.motivo }}</span>
                        </div>

                        <div class="info-row price-row">
                            <svg class="info-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z">
                                </path>
                            </svg>
                            <span class="info-label">Precio:</span>
                            <span class="info-value price">${{ turno.precioPagado || 0 }}</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Empty State for Active -->
            <div *ngIf="turnosActivos().length === 0" class="empty-state">
                <svg class="empty-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z">
                    </path>
                </svg>
                <h3 class="empty-title">No tienes turnos próximos</h3>
                <p class="empty-text">Cuando solicites un turno, aparecerá aquí</p>
            </div>
        </section>

        <!-- Historial Section -->
        <section class="section">
            <div class="section-header">
                <h2 class="section-title">
                    <svg class="section-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    Historial
                </h2>
                <span class="badge-count">{{ turnosFinalizados().length }}</span>
            </div>

            <!-- Finalized Appointments -->
            <div *ngIf="turnosFinalizados().length > 0" class="turnos-grid">
                <div *ngFor="let turno of turnosFinalizados()" class="turno-card finalized">
                    <div class="card-header">
                        <div class="patient-info">
                            <div class="patient-avatar">
                                {{ turno.pacienteNombre?.charAt(0) || 'P' }}
                            </div>
                            <div>
                                <h3 class="patient-name">{{ turno.pacienteNombre || 'Paciente' }}</h3>
                                <p class="patient-age" *ngIf="turno.pacienteEdad">{{ turno.pacienteEdad }} años</p>
                            </div>
                        </div>
                        <span [class]="'status-badge ' + getStatusColor(turno.estado)">
                            {{ turno.estado }}
                        </span>
                    </div>

                    <div class="card-body">
                        <div class="info-row">
                            <svg class="info-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                            </svg>
                            <span class="info-label">Profesional:</span>
                            <span class="info-value">{{ turno.profesionalNombre || 'No asignado' }}</span>
                        </div>

                        <div class="info-row">
                            <svg class="info-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z">
                                </path>
                            </svg>
                            <span class="info-label">Fecha:</span>
                            <span class="info-value">{{ turno.fechaString || formatDate(turno.fecha) }}</span>
                        </div>

                        <div class="info-row">
                            <svg class="info-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                            <span class="info-label">Hora:</span>
                            <span class="info-value">{{ turno.horaString || turno.hora }}</span>
                        </div>

                        <div class="info-row">
                            <svg class="info-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z">
                                </path>
                            </svg>
                            <span class="info-label">Motivo:</span>
                            <span class="info-value">{{ turno.motivo }}</span>
                        </div>

                        <div class="info-row price-row">
                            <svg class="info-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z">
                                </path>
                            </svg>
                            <span class="info-label">Precio:</span>
                            <span class="info-value price">${{ turno.precioPagado || 0 }}</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Empty State for Finalized -->
            <div *ngIf="turnosFinalizados().length === 0" class="empty-state">
                <svg class="empty-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                <h3 class="empty-title">No hay turnos finalizados</h3>
                <p class="empty-text">Tu historial de turnos aparecerá aquí</p>
            </div>
        </section>
    </div>
</div>