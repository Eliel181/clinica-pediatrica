<div class="space-y-6 pt-6 min-h-screen font-sans">

    <!-- Header -->
    <div class="bg-white rounded-2xl shadow-sm border border-slate-100 p-6">
        <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4">
            <div>
                <h2 class="text-xl font-bold text-slate-800 flex items-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                        stroke="currentColor" class="w-6 h-6 text-teal-600">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z" />
                    </svg>
                    Panel de Pacientes
                </h2>
                <p class="text-sm text-slate-500 mt-1" *ngIf="currentUserRole">
                    Vista: <span
                        class="inline-flex items-center gap-1.5 py-1 px-3 rounded-full text-xs font-medium bg-teal-50 text-teal-700">{{
                        currentUserRole }}</span>
                </p>
            </div>
        </div>
    </div>

    <!-- Loading State -->
    <div *ngIf="isLoading" class="bg-white rounded-2xl shadow-sm border border-slate-100 p-12">
        <div class="flex flex-col items-center justify-center gap-3">
            <div class="w-10 h-10 border-4 border-teal-200 border-t-teal-600 rounded-full animate-spin"></div>
            <span class="text-sm font-medium text-teal-700 animate-pulse">Cargando pacientes...</span>
        </div>
    </div>

    <!-- Dashboard Content -->
    <div *ngIf="!isLoading">
        <!-- Statistics Cards -->
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
            <!-- Total Card -->
            <div class="bg-white rounded-2xl shadow-sm border border-slate-100 p-6 hover:shadow-md transition-shadow">
                <div class="flex items-center gap-4">
                    <div
                        class="w-12 h-12 rounded-xl bg-gradient-to-br from-teal-500 to-teal-600 flex items-center justify-center flex-shrink-0">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                            stroke="currentColor" class="w-6 h-6 text-white">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z" />
                        </svg>
                    </div>
                    <div class="flex-1">
                        <p class="text-sm font-medium text-slate-600">Total Pacientes</p>
                        <p class="text-2xl font-bold text-slate-900">{{ stats.total }}</p>
                    </div>
                </div>
            </div>

            <!-- Masculino Card -->
            <div class="bg-white rounded-2xl shadow-sm border border-slate-100 p-6 hover:shadow-md transition-shadow">
                <div class="flex items-center gap-4">
                    <div
                        class="w-12 h-12 rounded-xl bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center flex-shrink-0">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"
                            class="w-7 h-7 text-white">
                            <circle cx="9" cy="13" r="5" stroke="white" stroke-width="1.5" fill="white" />
                            <line x1="13" y1="9" x2="19" y2="3" stroke="white" stroke-width="2"
                                stroke-linecap="round" />
                            <polyline points="15,3 19,3 19,7" stroke="white" stroke-width="2" fill="none"
                                stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                    </div>
                    <div class="flex-1">
                        <p class="text-sm font-medium text-slate-600">Masculino</p>
                        <p class="text-2xl font-bold text-slate-900">{{ stats.masculino }}</p>
                    </div>
                </div>
            </div>

            <!-- Femenino Card -->
            <div class="bg-white rounded-2xl shadow-sm border border-slate-100 p-6 hover:shadow-md transition-shadow">
                <div class="flex items-center gap-4">
                    <div
                        class="w-12 h-12 rounded-xl bg-gradient-to-br from-pink-500 to-pink-600 flex items-center justify-center flex-shrink-0">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"
                            class="w-7 h-7 text-white">
                            <circle cx="12" cy="8" r="5" stroke="white" stroke-width="1.5" fill="white" />
                            <line x1="12" y1="13" x2="12" y2="20" stroke="white" stroke-width="2"
                                stroke-linecap="round" />
                            <line x1="9" y1="17" x2="15" y2="17" stroke="white" stroke-width="2"
                                stroke-linecap="round" />
                        </svg>
                    </div>
                    <div class="flex-1">
                        <p class="text-sm font-medium text-slate-600">Femenino</p>
                        <p class="text-2xl font-bold text-slate-900">{{ stats.femenino }}</p>
                    </div>
                </div>
            </div>

            <!-- Otro Card -->
            <div class="bg-white rounded-2xl shadow-sm border border-slate-100 p-6 hover:shadow-md transition-shadow">
                <div class="flex items-center gap-4">
                    <div
                        class="w-12 h-12 rounded-xl bg-gradient-to-br from-purple-500 to-purple-600 flex items-center justify-center flex-shrink-0">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"
                            class="w-7 h-7 text-white">
                            <circle cx="12" cy="10" r="4.5" stroke="white" stroke-width="1.5" fill="white" />
                            <line x1="12" y1="14.5" x2="12" y2="20" stroke="white" stroke-width="2"
                                stroke-linecap="round" />
                            <line x1="9.5" y1="17" x2="14.5" y2="17" stroke="white" stroke-width="2"
                                stroke-linecap="round" />
                            <line x1="15" y1="7" x2="18" y2="4" stroke="white" stroke-width="1.8"
                                stroke-linecap="round" />
                            <polyline points="16,4 18,4 18,6" stroke="white" stroke-width="1.8" fill="none"
                                stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                    </div>
                    <div class="flex-1">
                        <p class="text-sm font-medium text-slate-600">Otro</p>
                        <p class="text-2xl font-bold text-slate-900">{{ stats.otro }}</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Patient List -->
        <div class="bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden">
            <div class="p-6 border-b border-slate-100">
                <h3 class="text-lg font-bold text-slate-800 flex items-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                        stroke="currentColor" class="w-5 h-5 text-teal-600">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M8.25 6.75h12M8.25 12h12m-12 5.25h12M3.75 6.75h.007v.008H3.75V6.75Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0ZM3.75 12h.007v.008H3.75V12Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm-.375 5.25h.007v.008H3.75v-.008Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z" />
                    </svg>
                    Lista de Pacientes
                </h3>
            </div>

            <!-- Empty State -->
            <div *ngIf="pacientes.length === 0" class="p-12 text-center">
                <div class="flex flex-col items-center justify-center gap-3 text-slate-400">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                        stroke="currentColor" class="w-16 h-16">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z" />
                    </svg>
                    <p class="font-medium text-lg">No se encontraron pacientes</p>
                    <p class="text-sm text-slate-400" *ngIf="currentUserRole === 'Pediatra'">
                        No tienes turnos asignados con pacientes
                    </p>
                </div>
            </div>

            <!-- Patient Table -->
            <div *ngIf="pacientes.length > 0" class="overflow-x-auto">
                <table class="w-full text-left border-collapse">
                    <thead>
                        <tr class="bg-slate-50/50 border-b border-slate-100">
                            <th class="p-4 text-xs font-semibold text-slate-500 uppercase tracking-wider">Nombre
                                Completo</th>
                            <th class="p-4 text-xs font-semibold text-slate-500 uppercase tracking-wider">DNI</th>
                            <th class="p-4 text-xs font-semibold text-slate-500 uppercase tracking-wider">Sexo</th>
                            <th class="p-4 text-xs font-semibold text-slate-500 uppercase tracking-wider">Edad</th>
                            <th class="p-4 text-xs font-semibold text-slate-500 uppercase tracking-wider">Fecha de
                                Nacimiento</th>
                            <th class="p-4 text-xs font-semibold text-slate-500 uppercase tracking-wider text-right">
                                Acciones</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-slate-100">
                        <tr *ngFor="let paciente of pacientes" class="hover:bg-slate-50/80 transition-colors">
                            <td class="p-4">
                                <div class="flex items-center gap-3">
                                    <div
                                        class="w-10 h-10 rounded-full bg-teal-50 text-teal-600 flex items-center justify-center font-bold text-sm flex-shrink-0">
                                        {{ paciente.nombre.charAt(0) }}{{ paciente.apellido.charAt(0) }}
                                    </div>
                                    <div>
                                        <p class="font-medium text-slate-900">{{ paciente.nombre }} {{ paciente.apellido
                                            }}</p>
                                    </div>
                                </div>
                            </td>
                            <td class="p-4">
                                <span class="text-sm text-slate-700">{{ paciente.dni }}</span>
                            </td>
                            <td class="p-4">
                                <span class="px-3 py-1 rounded-full text-xs font-medium" [ngClass]="{
                    'bg-blue-50 text-blue-700': paciente.sexo === 'Masculino',
                    'bg-pink-50 text-pink-700': paciente.sexo === 'Femenino',
                    'bg-purple-50 text-purple-700': paciente.sexo === 'Otro'
                  }">
                                    {{ paciente.sexo }}
                                </span>
                            </td>
                            <td class="p-4">
                                <span class="text-sm text-slate-700">{{ calculateAge(paciente.fechaNacimiento) }}
                                    años</span>
                            </td>
                            <td class="p-4">
                                <span class="text-sm text-slate-700">{{ paciente.fechaNacimiento | date: 'dd/MM/yyyy'
                                    }}</span>
                            </td>
                            <td class="p-4 text-right">
                                <button *ngIf="currentUserRole === 'Pediatra' "
                                    class="inline-flex items-center gap-2 px-3 py-2 text-sm font-medium text-teal-600 hover:text-teal-700 hover:bg-teal-50 rounded-lg transition-colors"
                                    title="Ver Historial Clínico">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                        stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
                                        <path stroke-linecap="round" stroke-linejoin="round"
                                            d="M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z" />
                                    </svg>
                                    <span class="hidden sm:inline">Historial</span>
                                </button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>